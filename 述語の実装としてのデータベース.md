## 抽象と具象の往還

共有財産として永続的に格納されるビッグデータやそれを利活用する仕組みをデータベースと言う。OSでは複数プロセスによるデータ利活用の秩序が保てず、そのためデータベースの開発が行われてきた。ビッグデータを扱うには、データ群を抽象化してスキーマとし、スキーマに基づいてデータをインスタンスとして格納する。スキーマは DDL が、インスタンスは DML が記述する。言い換えると、DDL によってデータ辞書が書かれ、DML はデータ辞書に照らしてデータ処理の仕方を決定し、実行する。抽象化の仕方は二段階によって行われる。すなわち、データベースはデータ群をまず全体的に抽象化し、その後、個々のプロセスに対応した抽象化を行うのである。このように見ていくと、データベースを管理する DBMS は対象データとそれに対する操作を仮想化するのだと言えるだろう。データベースはつまるところ、実世界の写像であり、実世界の変化に応じてインスタンスを、場合によってはスキーマそのものを変更していく。

## 関係即述語

データモデルは、データ型の規約とそのデータ操作体系ならびに整合性制約を規定する。データモデルの構築に伴い、データベースは実世界の写像をつくり、インタフェースとして提供する。さまざまなデータモデルがある中で関係データベースは述語により写像をつくる。すなわち、関係データベースは述語データベースである。実体は名辞であり、関連は述語である。関連が述語として理解できることは、繰り返し強調してもいいほど関係データベース全体の理解にとって重要である。もっと言えば名辞すらも述語である。というのも、実体は 1 項述語であり、関連は n 項述語であるからだ。関係データベースのデータモデルであるところの実体関連モデルは整合性制約や参加制約、キー制約を記述する仕組みを用意している。これは述語における多重度に関わる概念であるといえるだろう。実体関連モデルには階層関係の仕組みもある。階層関係は実体集合が属性を継承し、さらに独自の属性を付与することで生じるものだが、属性と言うのはいわば形容詞であり、階層関係は形容詞の追加による実体集合の特殊化を表しているのである。ここまで見てきたように、実体も関連もともに述語であるのだが、ここで実体の基礎が n 項関係に置かれることを鑑みれば、n 項関係と n 項述語とが数学的に互いに等価であることも見て取れる。

## 可能性と現実世界

リレーションは可能性たるスキーマ R と、その現実世界たるインスタンス r から成る。ここで、r はタプルの集合と捉えることもできる。時々刻々と変化していくインスタンスにおいては、整合性を保証するためにさまざまな制約が課される。例えば、

- 第一正規形制約：ドメインは集合を要素にとらない、すなわち、一階述語である
- キー制約：キーが設定されたならばそのキーはキーであり続けなければならない
- ドメイン制約：タプルの各成分はそれぞれドメインからとられる
- 参照整合性制約：外部キーはいつも参照ができなければならない

また、関数従属性や NULL といった概念なども整合性制約を考える上では重要になってくる。こうした整合性制約が満たされていれば、リレーションに対して関係代数や関係論理と言ったデータ操作を施すことができる。これらの演算体系は構成的にリレーションを導出し、関係データベースに対して閉じた演算体系を提供する。

## SQL

関係データモデルの拡張がデータベース言語である。中でも SQL は関係データベースに対するデータベース言語の国際標準である。SQL は関係データモデルと違いマルチ集合を扱い、また、属性やタプルを順序付ける。このような違いから、関係データモデルにおけるリレーション、タプル、属性をそれぞれ表、行、列と呼び区別している。

SQL の機能は下記の通り。

- SQL
    - データ定義
        - 実表の定義
            - 各列の列名とそのデータ型を定義
        - ビューの定義
            - 外部レベルに対応
            - 実表に準拠
    - データ操作
        - 自然結合
            > 問合せ
            - SELECT
                > 列に対する操作
                - 重複行を除去したい場合は DISTINCT 指定
                - 集合関数
                    - COUNT
                    - SUM
                    - AVG
                    - MAX
                    - MIN
            - FROM
                - 同一表同士の結合は相関名を与えることで区別
            - WHERE
                > 行に対する操作
                - 論理演算
                    - UNION
                    - EXCEPT
                    - INTERSECT
                - 更新
                    - INSERT
                    - DELETE
                    - UPDATE
        - グループ表
            - サブセットをつくる
                - GROUPED BY 句でグループ表を作成
                - HAVING 句でグループの選択
